# godot-yt-dlp-dev
A simple API for downloading videos from YouTube (and other websites).

![Godot v4.x](https://img.shields.io/badge/Godot-v4.5+-478cbf?logo=godot-engine&logoColor=white)
![License](https://img.shields.io/badge/License-MIT-green)
![Version](https://img.shields.io/badge/Version-1.0.0-blue)

**Godot yt-dlp dev** ‚Äî —ç—Ç–æ —É–¥–æ–±–Ω–∞—è –æ–±–µ—Ä—Ç–∫–∞ (API) –Ω–∞–¥ –ø–æ–ø—É–ª—è—Ä–Ω–æ–π —É—Ç–∏–ª–∏—Ç–æ–π yt-dlp –¥–ª—è Godot Engine 4. –ü–ª–∞–≥–∏–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–∫–∞—á–∏–≤–∞—Ç—å –≤–∏–¥–µ–æ, –∞—É–¥–∏–æ, –ø–æ–ª—É—á–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –º–µ–¥–∏–∞ –∏ –∏—Å–∫–∞—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç –Ω–∞ YouTube –∏ –¥—Ä—É–≥–∏—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö –ø—Ä—è–º–æ –∏–∑ –≤–∞—à–µ–≥–æ –∏–≥—Ä—ã –∏–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

> [!IMPORTANT]
> –ü–ª–∞–≥–∏–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∏–≤–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –±–∏–Ω–∞—Ä–Ω—ã–µ —Ñ–∞–π–ª—ã (yt-dlp –∏ ffmpeg) –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–º–∞–Ω–¥—ã YtDlp.setup()

# ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- üì• –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ —Å –≤—ã–±–æ—Ä–æ–º –∫–∞—á–µ—Å—Ç–≤–∞ (1080p, 720p –∏ —Ç.–¥.).
- üéµ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∞—É–¥–∏–æ (mp3 –∏ –¥—Ä—É–≥–∏–µ —Ñ–æ—Ä–º–∞—Ç—ã).
- ‚ÑπÔ∏è –ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–∏–¥–µ–æ, –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã).
- üîç –ü–æ–∏—Å–∫ –≤–∏–¥–µ–æ –ø–æ –∑–∞–ø—Ä–æ—Å—É.
- üñº –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–µ–≤—å—é (thumbnails).
- üßµ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å: –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –ø–æ—Ç–æ–∫–∞—Ö, –Ω–µ –±–ª–æ–∫–∏—Ä—É—è –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –∏–≥—Ä—ã.

# üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –ù–∞—Å—Ç—Ä–æ–π–∫–∞
–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–∞–ø–∫—É addons/godot-yt-dlp-dev –≤ –≤–∞—à –ø—Ä–æ–µ–∫—Ç.

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Project -> Project Settings -> Plugins –∏ –≤–∫–ª—é—á–∏—Ç–µ –ø–ª–∞–≥–∏–Ω.

## –ü–µ—Ä–≤–∏—á–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
–ü–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ª—é–±—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–ª–∞–≥–∏–Ω, —á—Ç–æ–±—ã –æ–Ω —Å–∫–∞—á–∞–ª –∏–ª–∏ –æ–±–Ω–æ–≤–∏–ª –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–µ —Ñ–∞–π–ª—ã (yt-dlp –∏ ffmpeg).
```gdscript
func _ready():
    # –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ —Å–∏–≥–Ω–∞–ª—É –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    YtDlp.setup_completed.connect(_on_setup_completed)
    
    # –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    YtDlp.setup()

func _on_setup_completed():
    print("Yt-dlp –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!")
```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
–ü–ª–∞–≥–∏–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–∏–Ω–≥–ª—Ç–æ–Ω–æ–≤ (Autoloads): `YtDlp`, `YtVideo`, `YtInfo`, `YtSearch` –∏ `YtEvents`.

### 1. –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ (YtVideo)
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ—Ç–æ–¥ download –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤–∏–¥–µ–æ. –ü—Ä–æ–≥—Ä–µ—Å—Å –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–∏—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ —Å–∏–≥–Ω–∞–ª—ã YtEvents.
```gdscript
func download_video(url: String):
    # –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
    YtEvents.download_progressed.connect(_on_progress)
    YtEvents.download_completed.connect(_on_completed)
    
    # download(url, –ø—É—Ç—å_—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è, –∫–∞—á–µ—Å—Ç–≤–æ)
    # –ö–∞—á–µ—Å—Ç–≤–æ: 'best' –∏–ª–∏ —á–∏—Å–ª–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, '1080')
    YtVideo.download(url, OS.get_user_data_dir() + '/downloads/%(title)s.%(ext)s', "1080")

func _on_progress(data: Dictionary):
    # data —Å–æ–¥–µ—Ä–∂–∏—Ç: percent, speed, eta
    print("–°–∫–∞—á–∞–Ω–æ: %s, –°–∫–æ—Ä–æ—Å—Ç—å: %s" % [data['percent'], data['speed']])

func _on_completed(data: Dictionary):
    print("–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!")
```

### 2. –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∞—É–¥–∏–æ
```gdscript
# download_audio(url, –ø—É—Ç—å, —Ñ–æ—Ä–º–∞—Ç, –∫–∞—á–µ—Å—Ç–≤–æ_–∞—É–¥–∏–æ)
YtVideo.download_audio("https://youtu.be/...", OS.get_user_data_dir() + "/track.mp3", "mp3", 0)
```

### 3. –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ —Ñ–æ—Ä–º–∞—Ç–æ–≤ (YtInfo)
–ß—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –≤–∏–¥–µ–æ –ø–µ—Ä–µ–¥ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ–º:
```gdscript
func get_video_qualities(url: String):
    YtEvents.quality_processed.connect(func(qualities): print(qualities))
    YtInfo.get_qualities(url) 
    # –í–µ—Ä–Ω–µ—Ç –º–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫: ["1080p", "720p", "480p", ...]
```

–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—É—é JSON-–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–∏–¥–µ–æ:
```gdscript
YtInfo.get_info(url) # –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–∏–¥–µ—Ç –≤ —Å–∏–≥–Ω–∞–ª YtEvents.info_processed
```

### 4. –ü–æ–∏—Å–∫ (YtSearch)
–ü–æ–∏—Å–∫ –≤–∏–¥–µ–æ.
```gdscript
func search_youtube(query: String):
    YtEvents.search_collector.connect(_on_search_result)
    # search(–∑–∞–ø—Ä–æ—Å, –∫–æ–ª-–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤, —Å–µ—Ä–≤–∏—Å)
    YtSearch.search(query, 5, "yt")

func _on_search_result(json_string: String):
    var data = JSON.parse_string(json_string)
    print("–ù–∞–π–¥–µ–Ω–æ: ", data.get("title"))
```

##üì° –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ API
### –°–∏–Ω–≥–ª—Ç–æ–Ω YtDlp
–£–ø—Ä–∞–≤–ª—è–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.
- setup(): –ó–∞–ø—É—Å–∫–∞–µ—Ç —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–≤.
- is_setup() -> bool: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç true, –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞.
- –°–∏–≥–Ω–∞–ª—ã: setup_completed, _update_completed.
### –°–∏–Ω–≥–ª—Ç–æ–Ω YtVideo
–ú–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–µ–¥–∏–∞-–∫–æ–Ω—Ç–µ–Ω—Ç–æ–º.
- download(url: String, path: String, quality: String = 'best', args: Array = [...])
- download_audio(url: String, path: String, format: String = 'mp3', quality: int = 0)
- get_thumbnail(url: String, args: Array = [...]): –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç URL –æ–±–ª–æ–∂–∫–∏.
### –°–∏–Ω–≥–ª—Ç–æ–Ω YtInfo
–ú–µ—Ç–æ–¥—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö.
- get_info(url: String): –ü–æ–ª–Ω—ã–π –¥–∞–º–ø –¥–∞–Ω–Ω—ã—Ö –æ –≤–∏–¥–µ–æ.
- get_qualities(url: String): –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤—ã—Å–æ—Ç –≤–∏–¥–µ–æ (1080, 720 –∏ —Ç.–¥.).

### –°–∏–Ω–≥–ª—Ç–æ–Ω YtEvents (–°–∏–≥–Ω–∞–ª—ã)
–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —É–∑–µ–ª —Å–æ–±—ã—Ç–∏–π. –ü–æ–¥–∫–ª—é—á–∞–π—Ç–µ—Å—å –∫ –Ω–µ–º—É –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤.
| –°–∏–≥–Ω–∞–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | ---: |
| download_progressed | –ü—Ä–æ–≥—Ä–µ—Å—Å —Å–∫–∞—á–∏–≤–∞–Ω–∏—è |
| download_completed | –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ |
| download_logs | –õ–æ–≥–∏ |
| info_processed | –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–∏–¥–µ–æ |
| quality_processed | –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–∞—á–µ—Å—Ç–≤ |
| search_collector | –û–¥–∏–Ω–æ—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–∏—Å–∫–∞ |
| search_logs | –õ–æ–≥–∏ |
| get_thumbnail | URL |
| error_occurred | –¢–µ–∫—Å—Ç –æ—à–∏–±–∫–∏ |

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
–ü–ª–∞–≥–∏–Ω —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–µ —Ñ–∞–π–ª—ã –≤ –ø–∞–ø–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö (user://):

- Windows: yt-dlp.exe, ffmpeg.exe, ffprobe.exe.
- Linux/macOS: yt-dlp_linux / yt-dlp_macos (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—é—Ç –ø—Ä–∞–≤–∞ chmod +x).

> [!NOTE]
> –î–ª—è —Ä–∞–±–æ—Ç—ã –Ω–∞ Windows –ø–ª–∞–≥–∏–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∏–≤–∞–µ—Ç –∏ —Ä–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç FFmpeg, —á—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è –≤–∏–¥–µ–æ –∏ –∞—É–¥–∏–æ –ø–æ—Ç–æ–∫–æ–≤ –ø—Ä–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–∏ –≤ –≤—ã—Å–æ–∫–æ–º –∫–∞—á–µ—Å—Ç–≤–µ.

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
–§—É–Ω–∫—Ü–∏–∏ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π yt-dlp. –ï—Å–ª–∏ YouTube –∏–∑–º–µ–Ω–∏—Ç API, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ setup() –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–∏–Ω–∞—Ä–Ω–æ–≥–æ —Ñ–∞–π–ª–∞.

## ü§ù –•–æ—Ç–∏—Ç–µ –ø–æ–º–æ—á—å –ø—Ä–æ–µ–∫—Ç—É?
–ü—Ä–æ–µ–∫—Ç **Godot yt-dlp dev** –æ—Ç–∫—Ä—ã—Ç –¥–ª—è –≤–∞—à–∏—Ö –∏–¥–µ–π –∏ —É–ª—É—á—à–µ–Ω–∏–π! –ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é –∏–ª–∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –±–∞–≥, —è –±—É–¥—É —Ä–∞–¥ –≤–∞—à–∏–º Pull Requests.

### –ß—Ç–æ –º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–µ–π—á–∞—Å (–∏–∑ TODO):
* **Download Queue**: –°–∏—Å—Ç–µ–º–∞ –æ—á–µ—Ä–µ–¥–∏, —á—Ç–æ–±—ã —Å–∫–∞—á–∏–≤–∞—Ç—å –¥–µ—Å—è—Ç–∫–∏ –≤–∏–¥–µ–æ –ø–æ –ø–æ—Ä—è–¥–∫—É.

> –ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –∏–¥–µ—è, –∫–æ—Ç–æ—Ä–æ–π –Ω–µ—Ç –≤ —Å–ø–∏—Å–∫–µ ‚Äî —Å–æ–∑–¥–∞–π—Ç–µ **Issue**, –∏ –º—ã –æ–±—Å—É–¥–∏–º –µ—ë —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é!
